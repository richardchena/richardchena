{% load static %}
<!DOCTYPE html>
<html lang="es" style="background-color: gray;">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <title>Crear Sprint</title>
        <link rel="stylesheet" href="{% static 'cuadro_mensaje.css' %}">
        <link rel="stylesheet" href="{% static 'registrar.css' %}">
        <link rel="shortcut icon" href="{% static 'logo.png' %}">
        <link rel="stylesheet" href="{% static 'check.css' %}">
        <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    </head>
    <style>
        .input_txt2 {
            width: 100%;
            border: 1px solid black;
            margin: 5px;
            padding: 11px;
            background: #a8a4a4;
            font-size: 13px;
            float: left;
        }
    </style>
    <body>
        <section class="form-home" style="height: 300px;">
            <h5>Crea un sprint</h5>
            <h4>Nombre Proyecto:&nbsp;{{proy}}</h4><br>
            <form id=project_form action="/reg_sprint" method="GET" autocomplete="off">
                <input class="input_txt2" type="text" id="txt" name="spr_nombre" value="" placeholder="Ingrese el nombre del sprint" maxlength="30" required>
    
                <input class="buttons" type="button" style="float: left; margin-top: 10%;" onclick="window.location='/sprint';" name="" value="CANCELAR">
                <input class="buttons" id="bt_registrar" type="submit" disabled style="float: right; margin-top: 10%;" name="" value="REGISTRAR">
            </form>
        </section>
        <script>
            function objecto(id) {
                return document.getElementById(id);
            }

            objecto("txt").addEventListener("input",function() {
                if (!this.value.length) { //Si la longitud de la cadena de caracteres es 0 => falsa
                    objecto("bt_registrar").disabled = true; //Deshabilitamos el botón
                } else { //Si no...
                    objecto("bt_registrar").disabled = false; //Lo habilitamos
                }
            });

            $("#bt_registrar").on('click', function(e){
                e.preventDefault();
                var formulario = $(this).parents('form');
                swal(
                    "¿Desea guardar el sprint?", 
                    {
                        buttons: true
                    }
                ).then(okay => { 
                    if (okay) {
                        formulario.submit();
                    }else{
                        return false;
                    }
                });
            });
        </script>
    </body>
</html>